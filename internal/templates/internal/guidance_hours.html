{% extends "internal/base.html" %}
{% load i18n %}
{% load member %}
{% load guidance_hours %}

{% block head %}
<style>
    .box{
        padding: 8px;
        width: 15rem;
    }
    .popup-wrapper {
        line-height: 2rem;
    }
</style>

{% endblock head %}

{% block body %}

    <h1 class="ui text-centered make_col_blue header">
        {% get_title %}
    </h1>

    <div class="ui container">
    
    {% for day, hours in guidance_hours.items %}
        <table class="ui celled inverted make_bg_blue table">
                <thead>
                    <tr>
                        <th> {% trans 'Time' %} </th>
                        <th> {% trans day  %} </th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
   
            {% for hour in hours %} 
                <tbody>
                    <tr>         
                        <td>{{ hour.start_time }}-{{ hour.end_time }}<a href="{% url 'edit-guidance-hours' hour.pk  %}"> </a> </td>
                        {% for slot in hour.slots %}

                            <td class="member-info"
                                data-variation="medium"          
                                {% if slot != None %}
                                {% get_committees slot as committees %}       
                                    data-html="
                                    <div class='popup-wrapper'>
                                        {% for committee_name, color in committees %}
                                            <div class='ui {{ color }} label'> {{ committee_name }} </div>
                                        {% endfor %}
                                        <div> {% trans "Telephone: " %} {{ slot.phone_number }} </div>
                                    </div>"
                                {% endif %}
                            >

                                <div class='box'>
                                {{ slot | default_if_none:"" }}
                                </div>
                            </td>
                           
                        {% endfor %}
                         <td> <a href="{% url 'edit-guidance-hours' hour.pk  %}"><i class="ui yellow edit pencil icon"> </i></a></td> 
                    </tr>
                </tbody>
            
            {% endfor %}
       
        </table>
    {% endfor %}

    {% if user|has_reset_guidance_hours_permission %}
    <form method="post">
        {% csrf_token %}
        <button type="submit" class="ui yellow button delete empty">
            Reset
        </button>
    </form>
    {% endif %}

    </div>
{% endblock body %}

{% block scripts %}

<script>
    $(".member-info").popup();
</script>

{% endblock scripts %}

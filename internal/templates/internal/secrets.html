{% extends 'internal/base.html' %}
{% load i18n %}
{% load static %}

{% block head %}
   <script src="{% static 'internal/js/secrets.js' %}"></script>
{% endblock %}

{% block body %}
    <div class="contentbox ui container">
        <h1>
            {% trans "Internal secrets" %}
            <a href="{% url 'create-secret' %}">
                <i class="ui green plus icon"></i>
            </a>
        </h1>

            <script>
                var i = 0;
            </script>

            {% for secret in secrets %}

            <h3>
                {{ secret.title }}
                {% if perms.internal.change_SecretContent %}
                    <a href="{% url 'edit-secret' secret.id %}">
                        <i class="ui yellow pencil icon"></i>
                    </a>
                    <a class="delete confirm" href="{% url 'delete-secret' secret.id %}">
                        <i class="red trash icon"></i>
                    </a>
                {% endif %}
                </h3>


                <button class="ui red button notEnter" onclick="showSecret()" id="{{ secret.id }}">{% trans "Do not enter" %}</button>
                <script>
                    var buttonEl = document.getElementsByClassName("notEnter");
                    buttonEl[i].id = i;

                    
                    /*
                     var buttonEl = document.createElement("button");
                     buttonEl.id = i;
                     buttonEl.className = "ui red button notEnter";

                     */
                    i += 1;
                </script>
                <div class="hidden" style="display:none;">
            {{ secret.description |safe }}
            <p> {% trans "Last edited:" %} {{ secret.date |safe }} </p>
            </div>

        {% endfor %}


    </div>
{% endblock body %}

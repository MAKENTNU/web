{% extends "web/base.html" %}
{% load staticfiles %}
{% load reservation_extra %}

{% block head %}
    <script type="text/javascript" src="{% static 'web/calendar/calendar.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'web/calendar/calendar.min.css' %}">
    <link rel="stylesheet" href="{% static 'make_queue/css/general.css' %}">
    <link rel="stylesheet" href="{% static 'make_queue/css/overview.css' %}">
{% endblock %}


{% block body %}
    {% can_use_machine machine user as can_use %}
    <div class="ui container">
        <div class="ui huge header">
            Reservasjoner
        </div>
        <div class="ui grid padded equal width ">
            <div class="column">
                <div class="ui cards">
                    {% include 'make_queue/machine_card.html' with machine=machine color_bottom=1 %}
                </div>
            </div>
            <div class="column">
                <div class="ui yellow vertical buttons">
                    <div class="enable_popup"
                         {% if not user.is_authenticated %}data-content="Du må være logget inn for å kunne lage nye reservasjoner"
                         {% elif not can_use %}data-content="{% get_machine_cannot_use_text machine %}"
                         {% elif not can_make_more_reservations %}data-content="Du har nådd maksimalt antall fremtidige reservasjoner"
                         {% endif %}>
                        <a class="ui labeled icon wrapped button {% if not can_use or not can_make_more_reservations %}disabled{% endif %}"
                           href="{% url 'make_reservation' machine=machine %}">
                            <i class="add icon"></i>
                            Ny reservasjon
                        </a>
                    </div>
                    <a class="ui labeled icon button" href="{% url 'my_reservations' %}">
                        <i class="list icon"></i>
                        Mine reservasjoner
                    </a>
                    <a class="ui labeled icon button" href="{% url 'reservation_machines_overview' %}">
                        <i class="cogs icon"></i>
                        Andre maskiner
                    </a>
                </div>
            </div>
        </div>
        {% url 'reservation_calendar' year=next.0 week=next.1 machine=machine as link_next %}
        {% url 'reservation_calendar' year=prev.0 week=prev.1 machine=machine as link_prev %}
        {% current_calendar_url machine as link_now %}
        {% include 'make_queue/reservation_calendar.html' with week_days=week_days link_prev=link_prev link_next=link_next %}
    </div>
    <script src="{% static "make_queue/js/reservation_calendar.js" %}"></script>
{% endblock body %}

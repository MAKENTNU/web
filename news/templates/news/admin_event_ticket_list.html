{% extends 'web/base.html' %}
{% load i18n %}
{% load static %}
{% load html_tags %}


{% block extra_head %}
    <link rel="stylesheet" href="{% static 'news/css/admin_event_ticket_list.css' %}"/>
    <script defer src="{% static 'news/js/email_copy.js' %}"></script>
{% endblock extra_head %}

{% block body %}

    <div class="ui container">
        <a href="{% url 'admin_event_detail' event.pk %}">
            <i class="angle double left icon"></i>{% trans "Event admin page" %}
        </a>
        <h1>{{ event.title }}</h1>

        <h3>{% trans "Email Addresses of Ticket Holders" %}</h3>
        <div class="emails-container">
            <div class="copy-button-container">
                <button class="copy-token ui make-bg-yellow icon button"><i class="clipboard icon"></i></button>
                <span data-content="{% trans "Click to copy the email addresses of the active tickets to the clipboard" %}.">
                    <i class="make-col-yellow question circle icon"></i>
                </span>
            </div>
            <input readonly class="copy-input input-monospace" value="{{ ticket_emails }}"/>
        </div>

        <h3>{% trans "tickets"|capfirst %}</h3>
        <b>
            {% blocktrans trimmed with num_active_tickets=focused_object.number_of_active_tickets num_tickets=focused_object.number_of_tickets %}
                {{ num_active_tickets }}/{{ num_tickets }} tickets reserved
            {% endblocktrans %}
        </b>
        <div class="ui relaxed divided list">
            {% for ticket in tickets %}
                <div class="item">
                    <span class="right floated ">
                        {% if ticket.active %}
                            <span class="ui green label">{% trans "active"|capfirst %}</span>
                        {% else %}
                            <span class="ui red label">{% trans "canceled"|capfirst %}</span>
                        {% endif %}
                    </span>
                    <i class="very large middle aligned {% if ticket.active %}green{% else %}red{% endif %} circle icon"></i>
                    <div class="ui content">
                        <div class="header">
                            {{ ticket.name }} - {{ ticket.email|urlize_target_blank }}
                        </div>
                        <div class="description">
                            <div>
                                <b>{% trans "Ref #" %}:</b>
                                <a href="{% url 'ticket_detail' ticket.pk %}">{{ ticket.uuid }}</a>
                            </div>
                            <div>
                                <b>{% trans "language"|capfirst %}</b> {{ ticket.get_language_display }}
                            </div>
                            {% if ticket.comment %}
                                <div>
                                    <b>{% trans "comment"|capfirst %}:</b> {{ ticket.comment }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% empty %}
                {% trans "No tickets have been registered for this event" %}
            {% endfor %}
        </div>
    </div>

{% endblock body %}
